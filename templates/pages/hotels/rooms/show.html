{% extends 'layouts/app.html' %}

{% block content %}

    <section class="inventory-section v1 pb-0 layout-radius">
        <div class="boxcar-container">
            <div class="boxcar-title-three">
                <ul class="breadcrumb">
                    <li>
                        <a href="{% url 'base:home' %}">
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'hotel:getHotels' %}">
                            Hotels
                        </a>
                    </li>
                    <li>
                        <a href="{% url 'hotel:hotelRooms' hotel.id %}">
                            {{ hotel.name }}
                        </a>
                    </li>
                    <li>
                        <span>
                            Room Details
                        </span>
                    </li>
                </ul>
                <h2>
                    Hotel Room Details
                </h2>

                <div class="content-box">
                    <div class="btn-box v2">
                        <div class="share-btn">
                            <span>Share</span>
                            <a href="#" class="share">
                                <img src="https://creativelayers.net/themes/boxcar-html/images/resource/share.svg">
                            </a>
                        </div>
                        <div class="share-btn">
                            <span>Save</span>
                            <a href="#" class="share"><img src="https://creativelayers.net/themes/boxcar-html/images/resource/share1-1.svg"></a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="inspection-column v2 col-xl-8 col-lg-12 col-md-12 col-sm-12">
                    <div class="inner-column">
                        <div class="gallery-sec">
                            <div class="image-column wrap-gallery-box">
                                <div class="inner-column inventry-slider-two">

                                    {# Display all room images as clickable Fancybox thumbnails #}
                                    {% for image in images %}
                                        <div class="image-box">
                                            <figure class="image">
                                                <a href="{{ image.image.url }}" data-fancybox="gallery">
                                                    <img src="{{ image.image.url }}" alt="{{ room.name }} image {{ forloop.counter }}" style="object-fit: cover;">
                                                </a>
                                            </figure>
                                        </div>
                                    {% empty %}
                                        <div class="image-box">
                                            <figure class="image">
                                                <a href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVQfxEyRp184pVTen_MQe-LEqhLZxhWAWj9A&s" data-fancybox="gallery">
                                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVQfxEyRp184pVTen_MQe-LEqhLZxhWAWj9A&s" alt="No image available">
                                                </a>
                                            </figure>
                                        </div>
                                    {% endfor %}
                                </div>

                                <div class="content-box">
                                    <ul class="video-list">
                                        {% if images %}
                                            <li>
                                                <a href="{{ images.0.image.url }}" data-fancybox="gallery">
                                                    <img src="https://creativelayers.net/themes/boxcar-html/images/resource/video1-4.svg">
                                                    All Photos
                                                </a>
                                            </li>
                                        {% endif %}
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <!-- description-sec -->
                        <div class="description-sec v2">
                            <h4 class="title">Description</h4>
                            <div class="text two">
                                {{ room.description }}
                            </div>
                        </div>
                        <!-- features-sec -->
                        <div class="features-sec v2">
                            <h4 class="title">Features</h4>
                            <div class="row">
                                <div class="list-column col-lg-12 col-md-12 col-sm-12">
                                    <div class="inner-column">
                                        <div style="display: flex; flex-wrap: wrap;">
                                            {% for item in amenities %}
                                                <div style="width: 25%; padding: 6px 10px; box-sizing: border-box;">
                                                    <i class="fa-solid fa-check" style="margin-right: 6px; color: #28a745;"></i>
                                                    {{ item.amenity.name }}
                                                </div>
                                            {% empty %}
                                                <div style="width: 100%;">No amenities available</div>
                                            {% endfor %}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="location-box v2">
                            <h4 class="title">Location</h4>
                            <div class="text">
                                <strong>Address: </strong>{{ hotel.address }}, {{ hotel.district }}, {{ hotel.sector }}, {{ hotel.province }}, {{ hotel.country }}
                            </div>
                            <a href="#" class="brand-btn">
                                Get Directions
                                <svg xmlns="http://www.w3.org/2000/svg" width="15" height="14" viewbox="0 0 15 14" fill="none">
                                    <g clip-path="url(#clip0_881_14440)">
                                    <path d="M14.1111 0H5.55558C5.34062 0 5.16668 0.173943 5.16668 0.388901C5.16668 0.603859 5.34062 0.777802 5.55558 0.777802H13.1723L0.613941 13.3362C0.46202 13.4881 0.46202 13.7342 0.613941 13.8861C0.689884 13.962 0.789415 14 0.88891 14C0.988405 14 1.0879 13.962 1.16388 13.8861L13.7222 1.3277V8.94447C13.7222 9.15943 13.8962 9.33337 14.1111 9.33337C14.3261 9.33337 14.5 9.15943 14.5 8.94447V0.388901C14.5 0.173943 14.3261 0 14.1111 0Z" fill="#405FF2"></path>
                                    </g>
                                    <defs>
                                        <clippath id="clip0_881_14440">
                                            <rect width="14" height="14" fill="white" transform="translate(0.5)"></rect>
                                        </clippath>
                                    </defs>
                                </svg>
                            </a>
                            <div class="goole-iframe">
                                <iframe src="{{ hotel.map_url }}"></iframe>
                            </div>
                        </div>
                        <div class="main-review-box">
                            <div class="review-sec v2">
                                <h4 class="title">Customer Reviews</h4>
                                <div class="review-box">
                                    <div class="rating-box">
                                        <div class="content-box">
                                            <span>Overall Rating</span>
                                            <h3 class="title">{{ average_rating }}</h3>
                                            <small>Out Of 5</small>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="reviews">
                                {% for review in reviews %}
                                    <div class="content-box {% if forloop.counter > 1 %}two{% endif %}">
                                        <div class="auther-name">
                                            <span>{{ review.user.name }}</span>
                                            <h6 class="name">{{ review.user.name }}</h6>
                                            <small>{{ review.created_at|date:"F Y" }}</small>
                                        </div>
                                        <div class="rating-list">
                                            <ul class="list">
                                                {% for i in "12345" %}
                                                    <li>
                                                        <i class="fa fa-star{% if forloop.counter > review.rating %}-o{% endif %}"></i>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                            <span>{{ review.title }}</span>
                                        </div>
                                        <div class="text">
                                            {{ review.review }}
                                        </div>
                                        <div class="btn-box">
                                            <a href="#" class="like-btn">
                                                <i class="fa-solid fa-thumbs-up"></i>Helpful
                                            </a>
                                            <a href="#" class="like-btn">
                                                <i class="fa-solid fa-thumbs-down"></i>Not helpful
                                            </a>
                                        </div>
                                    </div>
                                {% empty %}
                                    <p>No reviews yet for this room.</p>
                                {% endfor %}

                                {% if reviews.count > 2 %}
                                    <a href="#" class="review">
                                        See more reviews
                                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="14" viewBox="0 0 15 14" fill="none">
                                            <path d="M14.1106 0H5.55509C5.34013 0 5.16619 0.173943 5.16619 0.388901C5.16619 0.603859 5.34013 0.777802 5.55509 0.777802H13.1719L0.613453 13.3362C0.461531 13.4881 0.461531 13.7342 0.613453 13.8861C0.689396 13.962 0.788927 14 0.888422 14C0.987917 14 1.08741 13.962 1.16339 13.8861L13.7218 1.3277V8.94447C13.7218 9.15943 13.8957 9.33337 14.1107 9.33337C14.3256 9.33337 14.4996 9.15943 14.4996 8.94447V0.388901C14.4995 0.173943 14.3256 0 14.1106 0Z" fill="#405FF2"/>
                                        </svg>
                                    </a>
                                {% endif %}
                            </div>
                        </div>

                        {% if user.is_authenticated %}
                            <div class="reply-c-box">
                                <div class="Reply-sec">
                                    <h6 class="title">
                                        Leave a Reply
                                    </h6>
                                    <div class="text">
                                        Your email address will not be published. Required fields are marked *
                                    </div>
                                </div>
                                <form method="post" class="row">
                                    {% csrf_token %}
                                    <div class="col-lg-6">
                                        <div class="form_boxes">
                                            <label>Rating</label>
                                            {{ review_form.rating }}
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form_boxes">
                                            <label>Title</label>
                                            {{ review_form.title }}
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form_boxes v2">
                                            <label>Review</label>
                                            {{ review_form.review }}
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-submit">
                                            <button type="submit" class="theme-btn">
                                                Post Review
                                                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 14 14" fill="none">
                                                    <g clip-path="url(#clip0_711_3214)">
                                                        <path d="M13.6106 0H5.05509C4.84013 0 4.66619 0.173943 4.66619 0.388901C4.66619 0.603859 4.84013 0.777802 5.05509 0.777802H12.6719L0.113453 13.3362C-0.0384687 13.4881 -0.0384687 13.7342 0.113453 13.8861C0.189396 13.962 0.288927 14 0.388422 14C0.487917 14 0.587411 13.962 0.663391 13.8861L13.2218 1.3277V8.94447C13.2218 9.15943 13.3957 9.33337 13.6107 9.33337C13.8256 9.33337 13.9996 9.15943 13.9996 8.94447V0.388901C13.9995 0.173943 13.8256 0 13.6106 0Z" fill="white"></path>
                                                    </g>
                                                    <defs>
                                                        <clippath id="clip0_711_3214">
                                                        <rect width="14" height="14" fill="white"></rect>
                                                        </clippath>
                                                    </defs>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        {% else %}
                            <div class="alert alert-info mt-4">
                                <strong>Please log in</strong> to leave a review.
                                <a href="{% url 'auth:getLogin' %}?next={{ request.path }}">Log in</a>
                            </div>
                        {% endif %}
                    </div>
                </div>
                <div class="side-bar-column v2 v3 v4 col-xl-4 col-lg-12 col-md-12 col-sm-12">
                    <div class="inner-column">
                        <div class="overview-box">
                            <h4 class="title">Room Overview</h4>
                            <ul class="list v2">
                                <li>
                                    <span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 512 512">
                                            <path fill="currentColor" d="M440 424V88h-88V13.005L88 58.522V424H16v32h86.9L352 490.358V120h56v336h88v-32Zm-120 29.642l-200-27.586V85.478L320 51Z" />
                                            <path fill="currentColor" d="M256 232h32v64h-32z" />
                                        </svg>
                                        Room Type
                                    </span>
                                    {{ room.room_type }}
                                </li>
                                <li>
                                    <span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20">
                                            <path fill="currentColor" d="M15.5 9a2.5 2.5 0 0 1 2.495 2.336L18 11.5v5a.5.5 0 0 1-.992.09L17 16.5V14H3v2.5a.5.5 0 0 1-.992.09L2 16.5v-5a2.5 2.5 0 0 1 2.336-2.495L4.5 9zm-9-6h7a2.5 2.5 0 0 1 2.495 2.336L16 5.5V8h-2v-.5a.5.5 0 0 0-.41-.492L13.5 7H11a.5.5 0 0 0-.492.41l-.008.09V8h-1v-.5a.5.5 0 0 0-.41-.492L9 7H6.5a.5.5 0 0 0-.492.41L6 7.5V8H4V5.5a2.5 2.5 0 0 1 2.336-2.495z" />
                                        </svg>
                                        Bed Type
                                    </span>
                                    {{ room.bed_type }}
                                </li>
                                <li>
                                    <span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 48 48">
                                            <path fill="currentColor" d="M24 7.5a3.5 3.5 0 1 0 0 7a3.5 3.5 0 0 0 0-7M18 11a6 6 0 1 1 12 0a6 6 0 0 1-12 0m19-1.5a2.5 2.5 0 1 0 0 5a2.5 2.5 0 0 0 0-5M32 12a5 5 0 1 1 10 0a5 5 0 0 1-10 0M8.5 12a2.5 2.5 0 1 1 5 0a2.5 2.5 0 0 1-5 0M11 7a5 5 0 1 0 0 10a5 5 0 0 0 0-10m4 16.25A4.25 4.25 0 0 1 19.25 19h9.5A4.25 4.25 0 0 1 33 23.25V34a9 9 0 1 1-18 0zm9 17.25a6.5 6.5 0 0 0 6.5-6.5V23.25a1.75 1.75 0 0 0-1.75-1.75h-9.5a1.75 1.75 0 0 0-1.75 1.75V34a6.5 6.5 0 0 0 6.5 6.5m-13-3a4.5 4.5 0 0 0 2.367-.672c.219.826.532 1.613.926 2.35A7 7 0 0 1 4 33v-9.749A4.25 4.25 0 0 1 8.25 19h5.5q.433.001.841.083a6.24 6.24 0 0 0-1.343 2.417H8.25a1.75 1.75 0 0 0-1.75 1.75V33a4.5 4.5 0 0 0 4.5 4.5M37 40a7 7 0 0 1-3.293-.821c.394-.738.707-1.525.926-2.351A4.5 4.5 0 0 0 41.5 33v-9.75a1.75 1.75 0 0 0-1.75-1.75h-4.998a6.24 6.24 0 0 0-1.344-2.417q.41-.082.842-.083h5.5A4.25 4.25 0 0 1 44 23.25V33a7 7 0 0 1-7 7" />
                                        </svg>
                                        Occupancy
                                    </span>
                                    {{ room.occupancy  }} guests
                                </li>
                                <li>
                                    <span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 256 256">
                                            <path fill="currentColor" d="M136 114H48a6 6 0 0 0-6 6v88a6 6 0 0 0 6 6h88a6 6 0 0 0 6-6v-88a6 6 0 0 0-6-6m-6 88H54v-76h76Zm84-18v16a14 14 0 0 1-14 14h-24a6 6 0 0 1 0-12h24a2 2 0 0 0 2-2v-16a6 6 0 0 1 12 0m0-72v32a6 6 0 0 1-12 0v-32a6 6 0 0 1 12 0m0-56v16a6 6 0 0 1-12 0V56a2 2 0 0 0-2-2h-16a6 6 0 0 1 0-12h16a14 14 0 0 1 14 14m-64-8a6 6 0 0 1-6 6h-32a6 6 0 0 1 0-12h32a6 6 0 0 1 6 6M42 80V56a14 14 0 0 1 14-14h16a6 6 0 0 1 0 12H56a2 2 0 0 0-2 2v24a6 6 0 0 1-12 0" />
                                        </svg>
                                        Room Size
                                    </span>
                                    {{ room.size }} sqm
                                </li>
                                <li>
                                    <span>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                                            <path fill="currentColor" d="M5.676 4.257c3.928-3.219 9.733-2.995 13.4.672c3.905 3.905 3.905 10.237 0 14.142s-10.237 3.905-14.142 0a9.99 9.99 0 0 1-2.678-9.304l.077-.313l1.934.51a8 8 0 1 0 3.053-4.45l-.22.166l1.017 1.017l-4.596 1.06l1.06-4.596zM13.005 6v2h2.5v2h-5.5a.5.5 0 0 0-.09.992l.09.008h4a2.5 2.5 0 0 1 0 5h-1v2h-2v-2h-2.5v-2h5.5a.5.5 0 0 0 .09-.992l-.09-.008h-4a2.5 2.5 0 1 1 0-5h1V6z" />
                                        </svg>
                                        Refundable
                                    </span>
                                    {{ room.refundable|yesno:"Yes,No" }}
                                </li>
                            </ul>
                        </div>

                        <form method="POST" class="contact-box-two v2">
                            {% csrf_token %}
                            <span>Price Per Night</span>
                            <h3 class="title">${{ room.price_per_night }}</h3>

                            {{ booking_form.non_field_errors }}
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="form_boxes">
                                        {{ booking_form.check_in.label_tag }} {{ booking_form.check_in }}
                                        {{ booking_form.check_in.errors }}
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="form_boxes">
                                        {{ booking_form.check_out.label_tag }} {{ booking_form.check_out }}
                                        {{ booking_form.check_out.errors }}
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="form_boxes">
                                        {{ booking_form.guests.label_tag }} {{ booking_form.guests }}
                                        {{ booking_form.guests.errors }}
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="form_boxes">
                                        {{ booking_form.special_requests.label_tag }} {{ booking_form.special_requests }}
                                    </div>
                                </div>
                            </div>

                            <div class="total-price mt-3 mb-2">
                                <strong>Total Price: $<span id="total-price">0.00</span></strong>
                            </div>

                            <div class="btn-box">
                                <button type="submit" name="book_room" class="side-btn">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                                        <g fill="none">
                                            <path stroke="currentColor" stroke-linecap="round" stroke-width="1.5" d="M14 22h-4c-3.771 0-5.657 0-6.828-1.172S2 17.771 2 14v-2c0-3.771 0-5.657 1.172-6.828S6.229 4 10 4h4c3.771 0 5.657 0 6.828 1.172S22 8.229 22 12v2c0 3.771 0 5.657-1.172 6.828c-.653.654-1.528.943-2.828 1.07M7 4V2.5M17 4V2.5M21.5 9H10.75M2 9h3.875" />
                                            <path fill="currentColor" d="M18 17a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0-4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-5 4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0-4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m-5 4a1 1 0 1 1-2 0a1 1 0 0 1 2 0m0-4a1 1 0 1 1-2 0a1 1 0 0 1 2 0" />
                                        </g>
                                    </svg>
                                    Book Room Now
                                </button>
                            </div>
                        </form>

                        <script>
                            document.addEventListener("DOMContentLoaded", function () {
                                const checkInInput = document.getElementById("id_check_in");
                                const checkOutInput = document.getElementById("id_check_out");
                                const guestsInput = document.getElementById("id_guests");
                                const pricePerNight = parseFloat("{{ room.price_per_night }}");
                                const maxGuests = {{ room.occupancy }};
                                const totalPriceDisplay = document.getElementById("total-price");

                                // Disable past dates for check-in and check-out
                                const today = new Date().toISOString().split("T")[0];
                                checkInInput.setAttribute("min", today);
                                checkOutInput.setAttribute("min", today);

                                // Calculate total price
                                function calculateTotal() {
                                    const checkIn = new Date(checkInInput.value);
                                    const checkOut = new Date(checkOutInput.value);
                                    const timeDiff = checkOut - checkIn;
                                    const nights = timeDiff / (1000 * 60 * 60 * 24);

                                    if (nights > 0) {
                                        const total = nights * pricePerNight;
                                        totalPriceDisplay.textContent = total.toFixed(2);
                                    } else {
                                        totalPriceDisplay.textContent = "0.00";
                                    }
                                }

                                checkInInput.addEventListener("change", function () {
                                    checkOutInput.setAttribute("min", checkInInput.value);
                                    calculateTotal();
                                });

                                checkOutInput.addEventListener("change", calculateTotal);

                                // Restrict guests to room occupancy
                                guestsInput.addEventListener("input", function () {
                                    let val = parseInt(guestsInput.value);
                                    if (val > maxGuests) {
                                        guestsInput.value = maxGuests;
                                        alert(`This room only allows up to ${maxGuests} guest${maxGuests > 1 ? 's' : ''}.`);
                                    } else if (val < 1) {
                                        guestsInput.value = 1;
                                    }
                                });
                            });
                        </script>

                        <div class="contact-box">
                            <div class="icon-box">
                                {% with hotel.images.all|first as hotel_image %}
                                    {% if hotel_image %}
                                        <img src="{{ hotel_image.image.url }}" alt="{{ hotel.name }}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                                    {% else %}
                                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVQfxEyRp184pVTen_MQe-LEqhLZxhWAWj9A&s" alt="Default Hotel" style="width: 100%; height: 100%; object-fit: cover; border-radius: 50%;">
                                    {% endif %}
                                {% endwith %}
                            </div>
                            <div class="content-box">
                                <h6 class="title">
                                    {{ hotel.name }}
                                </h6>
                                <div class="text">
                                    {{ hotel.address }}
                                </div>
                                <ul class="contact-list" style="margin-bottom: 10px !important;">
                                    <li>
                                        <a href="#">
                                            <div class="image-box">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                                                    <path fill="#405FF2" d="m4.16 21.633l-.002.002l-.79.741l1.076.12a7.8 7.8 0 0 0 2.691-.199c.891-.234 1.828-.688 2.422-1.532c.786.154 1.604.235 2.443.235c6 0 11-4.184 11-9.5S18 2 12 2S1 6.184 1 11.5c0 3.236 1.866 6.065 4.668 7.77c-.086.471-.377.994-.723 1.462a8 8 0 0 1-.773.89z" />
                                                </svg>
                                            </div>
                                            {{ hotel.email }}
                                        </a>
                                    </li>
                                </ul>
                                <ul class="contact-list" style="margin-bottom: 10px !important;">
                                    <li>
                                        <a href="#">
                                            <div class="image-box">
                                                <img src="https://creativelayers.net/themes/boxcar-html/images/resource/phone1-2.svg">
                                            </div>
                                            {{ hotel.phone_number }}
                                        </a>
                                    </li>
                                </ul>
                                <ul class="contact-list" style="margin-bottom: 10px !important;">
                                    <li>
                                        <a href="{{ hotel.email }}" target="_blank">
                                            <div class="image-box">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24">
                                                    <path fill="none" stroke="#405FF2" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 15l6-6m-4-3l.463-.536a5 5 0 0 1 7.071 7.072L18 13m-5 5l-.397.534a5.07 5.07 0 0 1-7.127 0a4.97 4.97 0 0 1 0-7.071L6 11" />
                                                </svg>
                                            </div>
                                            Visit Website
                                        </a>
                                    </li>
                                </ul>
                                <div class="btn-box">
                                    <a href="#" class="side-btn">
                                        Hotel Details
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 14 14" fill="none">
                                            <g clip-path="url(#clip0_881_7563)">
                                                <path d="M13.6111 0H5.05558C4.84062 0 4.66668 0.173943 4.66668 0.388901C4.66668 0.603859 4.84062 0.777802 5.05558 0.777802H12.6723L0.113941 13.3362C-0.0379805 13.4881 -0.0379805 13.7342 0.113941 13.8861C0.189884 13.962 0.289415 14 0.38891 14C0.488405 14 0.5879 13.962 0.663879 13.8861L13.2222 1.3277V8.94447C13.2222 9.15943 13.3962 9.33337 13.6111 9.33337C13.8261 9.33337 14 9.15943 14 8.94447V0.388901C14 0.173943 13.8261 0 13.6111 0Z" fill="white"></path>
                                            </g>
                                            <defs>
                                                <clippath id="clip0_881_7563">
                                                    <rect width="14" height="14" fill="white"></rect>
                                                </clippath>
                                            </defs>
                                        </svg>
                                    </a>
                                    <a href="#" class="side-btn two">
                                        Chat Via Whatsapp
                                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 14 14" fill="none">
                                            <g clip-path="url(#clip0_881_8744)">
                                                <path d="M13.6111 0H5.05558C4.84062 0 4.66668 0.173943 4.66668 0.388901C4.66668 0.603859 4.84062 0.777802 5.05558 0.777802H12.6723L0.113941 13.3362C-0.0379805 13.4881 -0.0379805 13.7342 0.113941 13.8861C0.189884 13.962 0.289415 14 0.38891 14C0.488405 14 0.5879 13.962 0.663879 13.8861L13.2222 1.3277V8.94447C13.2222 9.15943 13.3962 9.33337 13.6111 9.33337C13.8261 9.33337 14 9.15943 14 8.94447V0.388901C14 0.173943 13.8261 0 13.6111 0Z" fill="#60C961"></path>
                                            </g>
                                            <defs>
                                            <clippath id="clip0_881_8744">
                                                <rect width="14" height="14" fill="white"></rect>
                                            </clippath>
                                            </defs>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- cars-section-three -->
        <div class="cars-section-three">
            <div class="boxcar-container">
                <div class="boxcar-title wow fadeInUp">
                    <h2>Related Rooms</h2>
                    <a href="{% url 'hotel:hotelRooms' hotel.id %}" class="btn-title">
                        View All
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 14 14" fill="none">
                            <g clip-path="url(#clip0_601_243)">
                                <path d="M13.6109 0H5.05533C4.84037 0 4.66643 0.173943 4.66643 0.388901C4.66643 0.603859 4.84037 0.777802 5.05533 0.777802H12.6721L0.113697 13.3362C-0.0382246 13.4881 -0.0382246 13.7342 0.113697 13.8861C0.18964 13.962 0.289171 14 0.388666 14C0.488161 14 0.587656 13.962 0.663635 13.8861L13.222 1.3277V8.94447C13.222 9.15943 13.3959 9.33337 13.6109 9.33337C13.8259 9.33337 13.9998 9.15943 13.9998 8.94447V0.388901C13.9998 0.173943 13.8258 0 13.6109 0Z" fill="#050B20"></path>
                            </g>
                            <defs>
                                <clippath id="clip0_601_243">
                                <rect width="14" height="14" fill="white"></rect>
                                </clippath>
                            </defs>
                        </svg>
                    </a>
                </div>
                
                <div class="row car-slider-three" data-preview="4">
                    {% for room in similar_rooms %}
                        <div class="car-block-three col-lg-3 col-md-6 col-sm-12">
                            <div class="inner-box">
                                <div class="image-box">
                                    <figure class="image" style="height: 300px; width: 320px; overflow: hidden;">
                                        <a href="{% url 'hotel:roomDetails' room.hotel.id room.id %}">
                                            {% with room.images.all|first as img %}
                                                {% if img and img.image %}
                                                    <img src="{{ img.image.url }}" alt="{{ room.name }}"
                                                        style="height: 100%; width: 100%; object-fit: cover; display: block;">
                                                {% else %}
                                                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQVQfxEyRp184pVTen_MQe-LEqhLZxhWAWj9A&s"
                                                        alt="{{ room.name }}"
                                                        style="height: 100%; width: 100%; object-fit: cover; display: block;">
                                                {% endif %}
                                            {% endwith %}
                                        </a>
                                    </figure>
                                    <a href="{% url 'hotel:roomDetails' room.hotel.id room.id %}" title="" class="icon-box">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewbox="0 0 12 12" fill="none">
                                            <g clip-path="url(#clip0_601_1274)">
                                                <path d="M9.39062 12C9.15156 12 8.91671 11.9312 8.71128 11.8009L6.11794 10.1543C6.04701 10.1091 5.95296 10.1096 5.88256 10.1543L3.28869 11.8009C2.8048 12.1082 2.13755 12.0368 1.72722 11.6454C1.47556 11.4047 1.33685 11.079 1.33685 10.728V1.2704C1.33738 0.570053 1.90743 0 2.60778 0H9.39272C10.0931 0 10.6631 0.570053 10.6631 1.2704V10.728C10.6631 11.4294 10.0925 12 9.39062 12ZM6.00025 9.06935C6.24193 9.06935 6.47783 9.13765 6.68169 9.26743L9.27503 10.9135C9.31233 10.9371 9.35069 10.9487 9.39114 10.9487C9.48046 10.9487 9.61286 10.8788 9.61286 10.728V1.2704C9.61233 1.14956 9.51356 1.05079 9.39272 1.05079H2.60778C2.48642 1.05079 2.38817 1.14956 2.38817 1.2704V10.728C2.38817 10.7911 2.41023 10.8436 2.45384 10.8851C2.52582 10.9539 2.63563 10.9708 2.72599 10.9135L5.31934 9.2669C5.52267 9.13765 5.75857 9.06935 6.00025 9.06935Z" fill="black"></path>
                                            </g>
                                            <defs>
                                                <clippath id="clip0_601_1274">
                                                    <rect width="12" height="12" fill="white"></rect>
                                                </clippath>
                                            </defs>
                                        </svg>
                                    </a>
                                </div>
                                <div class="content-box">
                                    <h6 class="title">
                                        <a href="{% url 'hotel:roomDetails' room.hotel.id room.id %}">
                                            {{ room.name }}
                                        </a>
                                    </h6>
                                    <ul>
                                        <li>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 64 64">
                                                <path fill="currentColor" d="M60.026 39.445v-5.854l-5.82-1.464l-.397-.744c-.469-.875-.856-1.433-1.154-1.657c-.33-.255-.889-.394-1.42-.468c-.401-.745-.676-.864-.835-.934a1.35 1.35 0 0 0-.536-.106c-.438 0-.967.208-1.408.43c-.679-.729-1.063-.734-1.267-.736h-.224c-2.12 0-4.896.154-7.912.42l-.798-1.016c-.023-.03-2.393-3.065-3.031-5.41l-.116-.425v-8.232s-2.338.345-3.488-2.554h-1.031s-.27.111-.725.168c-.922-.105-2.119-.521-3.388-1.719C23.145 6 19.965 6 19.965 6h-1.031s-3.558 0-7.28 3.145c-1.356 1.146-2.659 1.637-3.567 1.745c-.716-.032-1.155-.194-1.155-.194H5.9C4.615 13.594 2 13.249 2 13.249v28.222h.412v2.935H3.81l.635-2.028l9.599 6.145c.28 1.771 1.5 5.656 1.5 5.656s1.313-3.081 1.521-3.722l.958.612l.488 2.483l.572-1.805l3.075 1.971l.375 3.903l.552.379l1.331-.379l.637-3.64l34.016-5.672l.843 3.444l1.675-.276V47.89l.413-.07v-7.453zM30.905 21.904c2.139 0 3.413.245 3.413.245c.697 2.559 3.197 5.738 3.197 5.738l-.311-.002c-6.207 0-10.847 1.852-10.847 1.852c-1.005-3.917-3.158-6.85-3.158-6.85a31.6 31.6 0 0 1 7.706-.983m-13.24.798c2.39 0 3.813.273 3.813.273c.78 2.862 3.574 6.417 3.574 6.417l-.328-.002c-6.951 0-12.148 2.073-12.148 2.073c-1.124-4.382-3.534-7.661-3.534-7.661c3.45-.872 6.439-1.1 8.623-1.1m-9.038 2.155a25 25 0 0 1 2.621 5.425c-.463.112-.723.184-.723.184c-3.618-1.418-4.719-4.387-4.719-4.387a20 20 0 0 1 2.821-1.222m5.778 7.021c-.509.399-1.404 1.67-1.601 2.485c-.191.793.02 3.381.183 5.026L4.12 35.062v-5.214l3.173-.258a9.8 9.8 0 0 0 2.887 1.74l.298.117l.308-.088c.012-.003.276-.076.738-.186q.075.257.145.52l.264 1.028l.994-.395c.017-.006.602-.233 1.607-.53c-.043.026-.092.054-.129.082m6.389 15.257s-.509-2.401-.878-2.401q-.046 0-.089.053c-.333.417-1.143 4.287-1.143 4.287s-.366-2.569-.798-2.569q-.062-.001-.125.074c-1.04 1.262-2.124 4.476-2.124 4.476s-1.313-5.22-1.042-7.374c.284-2.258 1.529-6.589 2.452-8.42c.444-.883 1.553-2.587 2.274-2.803c6.59-1.971 20.711-3.617 27.643-3.617h.213c.312.003 1.055 1.006 1.055 1.006s1.088-.7 1.631-.7q.092 0 .16.029c.208.091.595.95.595.95s1.139.085 1.469.339c.283.214.894 1.353.894 1.353s-1.645-.343-2.069-.355a29 29 0 0 0-.852-.012c-7.041 0-19.966 2.253-26.271 4.983c-.688.296-1.706 2.112-1.99 3.104c-.415 1.46-1.005 7.597-1.005 7.597m37.996-7.428l-35.001 4.955l-1.699-.829c.199-1.689.432-3.41.612-4.042c.199-.699.767-1.697 1.175-2.208l34.913-3.322z" />
                                            </svg>
                                            {{ room.get_bed_type_display }}
                                        </li>
                                        <li>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                                <path fill="currentColor" d="M5.676 4.257c3.928-3.219 9.733-2.995 13.4.672c3.905 3.905 3.905 10.237 0 14.142s-10.237 3.905-14.142 0a9.99 9.99 0 0 1-2.678-9.304l.077-.313l1.934.51a8 8 0 1 0 3.053-4.45l-.22.166l1.017 1.017l-4.596 1.06l1.06-4.596zM13.005 6v2h2.5v2h-5.5a.5.5 0 0 0-.09.992l.09.008h4a2.5 2.5 0 0 1 0 5h-1v2h-2v-2h-2.5v-2h5.5a.5.5 0 0 0 .09-.992l-.09-.008h-4a2.5 2.5 0 1 1 0-5h1V6z" />
                                            </svg>
                                            {{ room.refundable|yesno:"Yes,No" }} Refundable
                                        </li>
                                        <li>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 20 20">
                                                <g fill="currentColor">
                                                    <g opacity="0.2">
                                                        <path d="M9.75 7.75a3 3 0 1 1-6 0a3 3 0 0 1 6 0" />
                                                        <path fill-rule="evenodd" d="M6.75 8.75a1 1 0 1 0 0-2a1 1 0 0 0 0 2m0 2a3 3 0 1 0 0-6a3 3 0 0 0 0 6" clip-rule="evenodd" />
                                                        <path fill-rule="evenodd" d="M6.8 11.5A1.5 1.5 0 0 0 5.3 13v1.5a1 1 0 0 1-2 0V13a3.5 3.5 0 0 1 7 0v.5a1 1 0 1 1-2 0V13a1.5 1.5 0 0 0-1.5-1.5" clip-rule="evenodd" />
                                                        <path d="M12.75 7.75a3 3 0 1 0 6 0a3 3 0 0 0-6 0" />
                                                        <path fill-rule="evenodd" d="M15.75 8.75a1 1 0 1 1 0-2a1 1 0 0 1 0 2m0 2a3 3 0 1 1 0-6a3 3 0 0 1 0 6" clip-rule="evenodd" />
                                                        <path fill-rule="evenodd" d="M15.7 11.5a1.5 1.5 0 0 1 1.5 1.5v1.5a1 1 0 1 0 2 0V13a3.5 3.5 0 0 0-7 0v.5a1 1 0 1 0 2 0V13a1.5 1.5 0 0 1 1.5-1.5" clip-rule="evenodd" />
                                                        <path fill-rule="evenodd" d="M11.3 14.25a1.5 1.5 0 0 0-1.5 1.5v1.5a1 1 0 0 1-2 0v-1.5a3.5 3.5 0 0 1 7 0v1.5a1 1 0 1 1-2 0v-1.5a1.5 1.5 0 0 0-1.5-1.5" clip-rule="evenodd" />
                                                        <path d="M14.25 10.5a3 3 0 1 1-6 0a3 3 0 0 1 6 0" />
                                                        <path fill-rule="evenodd" d="M11.25 11.5a1 1 0 1 0 0-2a1 1 0 0 0 0 2m0 2a3 3 0 1 0 0-6a3 3 0 0 0 0 6" clip-rule="evenodd" />
                                                        <path d="M4.25 11.5h5v4h-5zm9 0h5v4h-5z" />
                                                        <path d="M9.25 13.5h4l.5 4.75h-5z" />
                                                    </g>
                                                    <path fill-rule="evenodd" d="M5 9a2 2 0 1 0 0-4a2 2 0 0 0 0 4m0 1a3 3 0 1 0 0-6a3 3 0 0 0 0 6" clip-rule="evenodd" />
                                                    <path fill-rule="evenodd" d="M3.854 8.896a.5.5 0 0 1 0 .708l-.338.337A3.47 3.47 0 0 0 2.5 12.394v1.856a.5.5 0 1 1-1 0v-1.856a4.47 4.47 0 0 1 1.309-3.16l.337-.338a.5.5 0 0 1 .708 0m11.792-.3a.5.5 0 0 0 0 .708l.338.337A3.47 3.47 0 0 1 17 12.094v2.156a.5.5 0 0 0 1 0v-2.156a4.47 4.47 0 0 0-1.309-3.16l-.337-.338a.5.5 0 0 0-.708 0" clip-rule="evenodd" />
                                                    <path fill-rule="evenodd" d="M14 9a2 2 0 1 1 0-4a2 2 0 0 1 0 4m0 1a3 3 0 1 1 0-6a3 3 0 0 1 0 6m-4.5 3.25a2.5 2.5 0 0 0-2.5 2.5v1.3a.5.5 0 0 1-1 0v-1.3a3.5 3.5 0 0 1 7 0v1.3a.5.5 0 1 1-1 0v-1.3a2.5 2.5 0 0 0-2.5-2.5" clip-rule="evenodd" />
                                                    <path fill-rule="evenodd" d="M9.5 11.75a2 2 0 1 0 0-4a2 2 0 0 0 0 4m0 1a3 3 0 1 0 0-6a3 3 0 0 0 0 6" clip-rule="evenodd" />
                                                </g>
                                            </svg>
                                            {{ room.occupancy }} People
                                        </li>
                                    </ul>
                                    <div class="btn-box">
                                        <span>
                                            Per Night
                                        </span>
                                        <small>
                                            ${{ room.price_per_night }}
                                        </small>
                                        <a href="{% url 'hotel:roomDetails' room.hotel.id room.id %}" class="details">
                                            View Details
                                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewbox="0 0 14 14" fill="none">
                                                <g clip-path="url(#clip0_601_4346)">
                                                    <path d="M13.6109 0H5.05533C4.84037 0 4.66643 0.173943 4.66643 0.388901C4.66643 0.603859 4.84037 0.777802 5.05533 0.777802H12.6721L0.113697 13.3362C-0.0382246 13.4881 -0.0382246 13.7342 0.113697 13.8861C0.18964 13.962 0.289171 14 0.388666 14C0.488161 14 0.587656 13.962 0.663635 13.8861L13.222 1.3277V8.94447C13.222 9.15943 13.3959 9.33337 13.6109 9.33337C13.8259 9.33337 13.9998 9.15943 13.9998 8.94447V0.388901C13.9998 0.173943 13.8258 0 13.6109 0Z" fill="#405FF2"></path>
                                                </g>
                                                <defs>
                                                    <clippath id="clip0_601_4346">
                                                        <rect width="14" height="14" fill="white"></rect>
                                                    </clippath>
                                                </defs>
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <!-- End shop section two -->
    </section>

{% endblock content %}